<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="siteTitle">Nexora Hub | Omni v4.0</title>
<link id="siteIcon" rel="icon" href="https://www.google.com/favicon.ico">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600&family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
<style>
:root {
--bg: #030303;
--accent: #00f2ff;
--sec-accent: #ff0055;
--text: #ffffff;
--panel-bg: rgba(5,5,5,0.95);
--glow-intensity: 20px;
--glow: 0 0 var(--glow-intensity) rgba(0, 242, 255, 0.3);
--box-size: 130px;
--grid-gap: 20px;
--glass-blur: 12px;
--cursor-size: 10px;
--grid-cols: 5;
--radius: 16px;
--font-main: 'Plus Jakarta Sans', sans-serif;
--font-tech: 'Orbitron', monospace;
--font-mono: 'JetBrains Mono', monospace;
}

* { box-sizing: border-box; outline: none; user-select: none; scrollbar-width: thin; scrollbar-color: var(--accent) #111; }
body {
margin: 0; height: 100vh; background: var(--bg); color: var(--text);
font-family: var(--font-main); overflow: hidden;
background-size: cover; background-position: center; transition: 0.5s;
}

/* Custom Cursor */
body.custom-cursor * { cursor: none !important; }
#cursor { position: fixed; pointer-events: none; z-index: 9999; transform: translate(-50%, -50%); display: none; mix-blend-mode: difference; }
#cursor.active { display: block; }
#cursor .dot { width: var(--cursor-size); height: var(--cursor-size); background: var(--accent); border-radius: 50%; box-shadow: var(--glow); }
#cursor .ring { position: absolute; top:50%; left:50%; transform:translate(-50%, -50%); width: 35px; height: 35px; border: 1px solid var(--accent); border-radius: 50%; opacity: 0.5; transition: 0.1s; }

/* Overlays */
#particleCanvas { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
.vignette { position: fixed; inset: 0; pointer-events: none; z-index: 2; background: radial-gradient(circle, transparent 40%, black 150%); }
.scanline { position: fixed; inset: 0; z-index: 9000; pointer-events: none; background: linear-gradient(to bottom, transparent, transparent 50%, rgba(0,0,0,0.15) 50%, rgba(0,0,0,0.15)); background-size: 100% 4px; display: none; opacity: 0.3; }

/* Navigation */
.tab-bar { position: fixed; top: 0; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; padding: 12px 25px; z-index: 100; background: rgba(0,0,0,0.7); backdrop-filter: blur(20px); border-radius: 0 0 25px 25px; border: 1px solid rgba(255,255,255,0.1); border-top: none; }
.tab { padding: 8px 25px; border-radius: 20px; font-family: var(--font-tech); font-size: 10px; color: #888; transition: 0.3s; cursor: pointer; border: 1px solid transparent; background: transparent; text-transform: uppercase; letter-spacing: 2px; }
.tab.active { color: var(--accent); background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); box-shadow: var(--glow); }

/* Views */
.view { position: absolute; inset: 0; display: none; padding-top: 100px; z-index: 10; flex-direction: column; align-items: center; }
.view.active { display: flex; animation: fadeUp 0.4s ease-out; }

/* Grid System */
.grid-container { overflow-y: auto; max-height: 78vh; width: 100%; display: flex; flex-direction: column; align-items: center; padding-bottom: 80px; }
.grid { display: grid; grid-template-columns: repeat(var(--grid-cols), var(--box-size)); gap: var(--grid-gap); padding: 20px; }

.box {
position: relative; width: var(--box-size); height: var(--box-size);
background: rgba(255,255,255,0.03); backdrop-filter: blur(var(--glass-blur));
border: 1px solid rgba(255,255,255,0.08); border-radius: var(--radius);
display: flex; flex-direction: column; justify-content: center; align-items: center;
text-decoration: none; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.box:hover { border-color: var(--accent); transform: translateY(-10px); box-shadow: var(--glow); background: rgba(255,255,255,0.07); }
.box i { font-size: 34px; color: #ccc; margin-bottom: 12px; transition: 0.3s; }
.box:hover i { color: var(--accent); transform: scale(1.1); filter: drop-shadow(0 0 8px var(--accent)); }
.box span { font-size: 11px; font-weight: 600; color: #fff; text-align: center; opacity: 0.8; letter-spacing: 0.5px; }

.del-btn { position: absolute; top: 10px; right: 10px; color: #ff4444; font-size: 14px; cursor: pointer; opacity: 0; transition: 0.2s; z-index: 5; }
.box:hover .del-btn { opacity: 0.8; }

/* Widgets */
.widget-area { position: fixed; top: 30px; right: 40px; text-align: right; z-index: 50; font-family: var(--font-tech); }
.clock { font-size: 38px; color: var(--text); font-weight: 700; }
.date { font-size: 11px; color: var(--accent); letter-spacing: 2px; text-transform: uppercase; margin-top: -5px; }
.greeting { font-family: var(--font-main); font-size: 14px; color: #888; margin-top: 5px; font-weight: 300; }
.sys-stat { font-family: var(--font-mono); font-size: 10px; color: var(--sec-accent); display: none; margin-top: 10px; padding: 5px 10px; background: rgba(0,0,0,0.3); border-radius: 5px; }

/* Sidebar UI */
.sidebar-btn { position: fixed; bottom: 30px; right: 30px; z-index: 200; font-size: 22px; color: var(--text); background: rgba(20,20,20,0.8); padding: 18px; border-radius: 50%; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); transition: 0.3s; }
.sidebar-btn:hover { color: var(--accent); border-color: var(--accent); box-shadow: var(--glow); transform: rotate(90deg); }

.sidebar { position: fixed; top: 0; right: -420px; width: 400px; height: 100%; background: var(--panel-bg); backdrop-filter: blur(50px); z-index: 5000; transition: 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); border-left: 1px solid rgba(255,255,255,0.1); }
.sidebar.open { right: 0; box-shadow: -50px 0 100px rgba(0,0,0,0.9); }
.sb-content { height: 100%; overflow-y: auto; padding: 35px; scrollbar-width: none; }

details { margin-bottom: 12px; border-radius: 12px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); }
summary { padding: 18px; cursor: pointer; font-size: 11px; color: #aaa; font-weight: 800; list-style: none; text-transform: uppercase; letter-spacing: 1.5px; }
summary:hover { color: var(--accent); }
.control-group { padding: 0 18px 18px 18px; display: flex; flex-direction: column; gap: 15px; }
.row { display: flex; justify-content: space-between; align-items: center; font-size: 11px; color: #ccc; }

input[type="text"], input[type="url"], input[type="number"], select { background: #0a0a0a; border: 1px solid #222; color: white; padding: 10px; border-radius: 8px; font-size: 11px; width: 100%; }
input:focus { border-color: var(--accent); }
.btn { background: #151515; border: 1px solid #333; color: #ccc; padding: 12px; border-radius: 8px; cursor: pointer; text-align: center; font-size: 10px; font-weight: 700; text-transform: uppercase; transition: 0.2s; }
.btn:hover { border-color: var(--accent); color: var(--accent); }
.btn-accent { background: var(--accent); color: #000; border: none; }
.btn-accent:hover { background: #fff; }

input[type="range"] { -webkit-appearance: none; width: 60%; height: 4px; background: #222; border-radius: 2px; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 14px; height: 14px; background: var(--accent); border-radius: 50%; cursor: pointer; box-shadow: 0 0 10px var(--accent); }

/* Media Player */
.window-frame { width: 92%; max-width: 1100px; height: 72vh; border-radius: var(--radius); overflow: hidden; border: 1px solid rgba(255,255,255,0.1); background: #000; display:flex; flex-direction: column; box-shadow: 0 30px 60px rgba(0,0,0,0.8); }
.media-bar { padding: 20px; background: #080808; border-top: 1px solid #1a1a1a; display: flex; gap: 15px; }
iframe { flex-grow: 1; border: none; background: #000; }

/* Panic States */
#panicBlank { position: fixed; inset: 0; background: #fff; z-index: 99999; display: none; }
#panicBSOD { position: fixed; inset: 0; background: #0000aa; color: #fff; font-family: monospace; z-index: 99999; display: none; padding: 60px; font-size: 18px; line-height: 1.5; }

@keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body class="custom-cursor">

<div id="cursor"><div class="dot"></div><div class="ring"></div></div>
<div class="vignette"></div>
<div class="scanline" id="scan"></div>
<canvas id="particleCanvas"></canvas>

<div id="panicBlank"></div>
<div id="panicBSOD">
<p>A problem has been detected and Windows has been shut down to prevent damage to your computer.</p>
<p>DRIVER_IRQL_NOT_LESS_OR_EQUAL</p><br>
<p>If this is the first time you've seen this Stop error screen, restart your computer. If this screen appears again, follow these steps:</p>
<p>Check to make sure any new hardware or software is properly installed.</p><br>
<p>Technical information:</p>
<p>*** STOP: 0x000000D1 (0x00000000, 0x00000002, 0x00000000, 0xF78D2090)</p>
</div>

<div class="tab-bar">
<button class="tab active" onclick="app.switchTab('home', this)">Hub</button>
<button class="tab" onclick="app.switchTab('media', this)">Media Player</button>
</div>

<div class="widget-area">
<div id="wClock" class="clock">00:00</div>
<div id="wDate" class="date">LOADING...</div>
<div id="wGreet" class="greeting">System Initialized</div>
<div id="wSys" class="sys-stat">CPU: 0% | RAM: 0.0GB</div>
</div>

<div id="home" class="view active">
<div style="position:relative; width:450px; margin-bottom:25px;">
<i class="fas fa-search" style="position:absolute; left:20px; top:50%; transform:translateY(-50%); color:var(--accent); opacity:0.5;"></i>
<input type="text" id="search" style="width:100%; border-radius:30px; background:rgba(0,0,0,0.6); border:1px solid #222; color:#fff; padding:16px 50px; font-family:var(--font-mono);" placeholder="Search Terminal..." oninput="app.filterGrid(this.value)">
</div>
<div class="grid-container">
<div class="grid" id="grid"></div>
</div>
</div>

<div id="media" class="view">
<div class="window-frame">
<iframe id="mediaFrame" src="" allow="autoplay; encrypted-media; fullscreen"></iframe>
<div class="media-bar">
<input type="text" id="mInput" placeholder="Paste Spotify Track/Playlist or YouTube Link..." style="flex-grow:1;">
<button class="btn btn-accent" style="width:120px" onclick="app.loadMedia()">LAUNCH</button>
</div>
</div>
</div>

<i class="fas fa-sliders-h sidebar-btn" onclick="document.getElementById('sidebar').classList.toggle('open')"></i>

<aside class="sidebar" id="sidebar">
<div class="sb-content">
<h2 style="font-family:var(--font-tech); color:var(--accent); font-size:18px; margin-bottom:5px; letter-spacing:2px;">OMNI CONFIG</h2>
<p style="font-size:10px; color:#555; margin-bottom:25px; font-weight:bold;">NEXORA HUB // CORE VERSION 4.0</p>

<details open>
<summary>Visual Tuning</summary>
<div class="control-group">
<div class="row"><span>Accent Color</span> <input type="color" id="accPick" onchange="app.setAccent(this.value)"></div>
<div class="row"><span>Glow Power</span> <input type="range" min="0" max="60" value="20" oninput="app.setCSS('--glow-intensity', this.value+'px')"></div>
<div class="row"><span>Glass Blur</span> <input type="range" min="0" max="40" value="12" oninput="app.setCSS('--glass-blur', this.value+'px')"></div>
<div class="row"><span>Scanlines</span> <input type="checkbox" id="scanCheck" onchange="document.getElementById('scan').style.display = this.checked ? 'block' : 'none'"></div>
<div class="row"><span>Custom Cursor</span> <input type="checkbox" id="curCheck" checked onchange="document.body.classList.toggle('custom-cursor', this.checked)"></div>
</div>
</details>

<details>
<summary>Grid & Interface</summary>
<div class="control-group">
<div class="row"><span>Columns</span> <input type="range" min="2" max="8" value="5" oninput="app.setCSS('--grid-cols', this.value)"></div>
<div class="row"><span>Grid Gap</span> <input type="range" min="5" max="60" value="20" oninput="app.setCSS('--grid-gap', this.value+'px')"></div>
<div class="row"><span>Box Radius</span> <input type="range" min="0" max="50" value="16" oninput="app.setCSS('--radius', this.value+'px')"></div>
<div class="row"><span>Edit Mode</span> <input type="checkbox" id="editToggle" onchange="app.editMode = this.checked; app.renderGrid()"></div>
<hr style="border:0; border-top:1px solid #222; margin:5px 0;">
<input type="text" id="nT" placeholder="Shortcut Name">
<input type="url" id="nU" placeholder="https://url-here.com">
<button class="btn btn-accent" onclick="app.addLink()">Add to Grid</button>
<button class="btn" style="color:#ff4444; border-color: #441111;" onclick="app.resetLinks()">Factory Reset</button>
</div>
</details>

<details>
<summary>Particle Engine</summary>
<div class="control-group">
<div class="row"><span>Shape</span>
<select id="pShape" onchange="particles.init()">
<option value="circle">Circles</option>
<option value="square">Squares</option>
<option value="matrix">Digital Rain</option>
<option value="star">Starfield</option>
</select>
</div>
<div class="row"><span>Density</span> <input type="number" id="pCount" value="70" onchange="particles.init()"></div>
<div class="row"><span>Speed</span> <input type="range" min="1" max="10" value="3" oninput="particles.speed = this.value/10"></div>
<div class="row"><span>Connecting Lines</span> <input type="checkbox" id="pLine" checked></div>
</div>
</details>

<details>
<summary>Stealth & Cloak</summary>
<div class="control-group">
<select onchange="app.cloak(this.value)">
<option value="">Choose Tab Mask...</option>
<option value="google">Google Search</option>
<option value="classroom">Google Classroom</option>
<option value="drive">My Drive</option>
<option value="docs">Google Docs</option>
</select>
<input type="text" placeholder="Custom Tab Title..." oninput="document.title = this.value">
<div class="row"><span>Panic (F9 Key)</span>
<select id="pType">
<option value="bsod">Fake Blue Screen</option>
<option value="blank">Blank White</option>
<option value="google">Redirect: Google</option>
</select>
</div>
</div>
</details>

<details>
<summary>System Data</summary>
<div class="control-group">
<div class="row"><span>24h Clock</span> <input type="checkbox" id="c24" checked></div>
<div class="row"><span>System Stats</span> <input type="checkbox" id="sysToggle" onchange="document.getElementById('wSys').style.display = this.checked ? 'block' : 'none'"></div>
<button class="btn" onclick="app.exportConfig()">Export JSON Config</button>
<button class="btn" onclick="app.importConfig()">Import JSON Config</button>
</div>
</details>

<button class="btn btn-accent" style="width:100%; margin-top:20px;" onclick="document.getElementById('sidebar').classList.remove('open')">SAVE & EXIT</button>
</div>
</aside>

<script>
const defaultLinks = [
{ n: "Nexora", u: "https://mathematicss.global.ssl.fastly.net" },
{ n: "Luminal", u: "https://sciencea.global.ssl.fastly.net" },
{ n: "Hideout", u: "https://artsuplies.global.ssl.fastly.net" },
{ n: "Movies", u: "https://mrbeastisrich.global.ssl.fastly.net" },
{ n: "Roblox", u: "https://our-ddddd.global.ssl.fastly.net" },
{ n: "Interstellar", u: "https://interstellar.global.ssl.fastly.net" },
{ n: "Utopia", u: "https://utopia.global.ssl.fastly.net" },
{ n: "Nebula", u: "https://nebula.global.ssl.fastly.net" },
{ n: "Discord", u: "https://discord.com" },
{ n: "YouTube", u: "https://youtube.com" }
];

const app = {
links: [],
editMode: false,

init: function() {
const saved = localStorage.getItem('nx_omni_links');
this.links = saved ? JSON.parse(saved) : defaultLinks;
this.renderGrid();
this.initClock();
this.initCursor();
this.initPanic();
particles.init();
particles.loop();
this.loadTheme();
},

renderGrid: function(list = this.links) {
const container = document.getElementById('grid');
container.innerHTML = '';
list.forEach((l, i) => {
const div = document.createElement('div');
div.className = 'box';
div.onclick = (e) => { if(!e.target.classList.contains('del-btn')) window.open(l.u, '_blank'); };

let icon = 'fa-link';
const name = l.n.toLowerCase();
if(name.includes('roblox')) icon = 'fa-gamepad';
else if(name.includes('movie') || name.includes('film')) icon = 'fa-film';
else if(name.includes('discord')) icon = 'fa-brands fa-discord';
else if(name.includes('math') || name.includes('calc')) icon = 'fa-calculator';
else if(name.includes('drive')) icon = 'fa-brands fa-google-drive';

div.innerHTML = `
${this.editMode ? `<i class="fas fa-trash del-btn" onclick="app.deleteLink(${i})"></i>` : ''}
<i class="fas ${icon}"></i>
<span>${l.n}</span>
`;
container.appendChild(div);
});
},

addLink: function() {
const n = document.getElementById('nT').value;
const u = document.getElementById('nU').value;
if(n && u) {
this.links.push({n, u});
this.save();
this.renderGrid();
document.getElementById('nT').value = '';
document.getElementById('nU').value = '';
}
},

deleteLink: function(i) {
this.links.splice(i, 1);
this.save();
this.renderGrid();
},

filterGrid: function(q) {
const f = this.links.filter(l => l.n.toLowerCase().includes(q.toLowerCase()));
this.renderGrid(f);
},

loadMedia: function() {
let val = document.getElementById('mInput').value.trim();
if(!val) return;

// Robust Spotify Fix
if(val.includes('spotify.com') && !val.includes('/embed')) {
val = val.replace('spotify.com/', 'spotify.com/embed/');
// Handle open.spotify.com/track/ID
if(val.includes('track/')) val = val.split('?')[0];
}
// YouTube Embed Fix
else if(val.includes('youtube.com/watch')) {
const id = val.split('v=')[1].split('&')[0];
val = `https://www.youtube.com/embed/${id}?autoplay=1`;
}
else if(val.includes('youtu.be/')) {
const id = val.split('.be/')[1].split('?')[0];
val = `https://www.youtube.com/embed/${id}?autoplay=1`;
}

document.getElementById('mediaFrame').src = val;
},

switchTab: function(id, btn) {
document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
document.getElementById(id).classList.add('active');
btn.classList.add('active');
},

cloak: function(v) {
const map = {
google: { t: "Google", i: "https://www.google.com/favicon.ico" },
classroom: { t: "Classes", i: "https://ssl.gstatic.com/classroom/favicon.png" },
drive: { t: "My Drive - Google Drive", i: "https://ssl.gstatic.com/images/branding/product/1x/drive_2020q4_32dp.png" },
docs: { t: "Essay - Google Docs", i: "https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico" }
};
if(map[v]) {
document.title = map[v].t;
document.getElementById('siteIcon').href = map[v].i;
}
},

initClock: function() {
setInterval(() => {
const d = new Date();
const mode = document.getElementById('c24').checked;
document.getElementById('wClock').innerText = d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit', hour12: !mode});
document.getElementById('wDate').innerText = d.toLocaleDateString([], {weekday:'long', month:'short', day:'numeric'});

const hr = d.getHours();
let g = "System Online";
if(hr < 12) g = "Good Morning, User";
else if(hr < 18) g = "Access Granted";
else g = "Night Mode Active";
document.getElementById('wGreet').innerText = g;

if(document.getElementById('sysToggle').checked && Math.random() > 0.8) {
document.getElementById('wSys').innerText = `CPU: ${Math.floor(Math.random()*12+3)}% | RAM: ${(Math.random()*0.8+2.2).toFixed(1)}GB`;
}
}, 1000);
},

initPanic: function() {
window.addEventListener('keydown', e => {
if(e.key === 'F9') {
const type = document.getElementById('pType').value;
if(type === 'bsod') document.getElementById('panicBSOD').style.display = 'block';
else if(type === 'blank') document.getElementById('panicBlank').style.display = 'block';
else location.href = 'https://google.com';
}
if(e.key === 'Escape') {
document.getElementById('panicBSOD').style.display = 'none';
document.getElementById('panicBlank').style.display = 'none';
}
});
},

setAccent: function(c) {
document.documentElement.style.setProperty('--accent', c);
document.documentElement.style.setProperty('--glow', `0 0 var(--glow-intensity) ${c}44`);
localStorage.setItem('nx_omni_accent', c);
},

setCSS: function(k, v) { document.documentElement.style.setProperty(k, v); },
save: function() { localStorage.setItem('nx_omni_links', JSON.stringify(this.links)); },
loadTheme: function() {
const acc = localStorage.getItem('nx_omni_accent');
if(acc) this.setAccent(acc);
},

resetLinks: function() {
if(confirm("Factory reset all shortcuts?")) {
this.links = [...defaultLinks];
this.save();
this.renderGrid();
}
},

exportConfig: function() {
const data = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(this.links));
const a = document.createElement('a'); a.href = data; a.download = 'nexora_hub_omni.json'; a.click();
},

importConfig: function() {
const inp = document.createElement('input'); inp.type = 'file';
inp.onchange = e => {
const reader = new FileReader();
reader.onload = ev => {
try {
this.links = JSON.parse(ev.target.result);
this.save();
location.reload();
} catch(err) { alert("Invalid JSON file."); }
};
reader.readAsText(e.target.files[0]);
};
inp.click();
},

initCursor: function() {
const c = document.getElementById('cursor');
window.onmousemove = e => {
c.style.left = e.clientX+'px'; c.style.top = e.clientY+'px';
c.classList.add('active');
};
}
};

const particles = {
cvs: null, ctx: null, pts: [], speed: 0.3,
init: function() {
this.cvs = document.getElementById('particleCanvas');
this.ctx = this.cvs.getContext('2d');
this.cvs.width = window.innerWidth;
this.cvs.height = window.innerHeight;
this.pts = [];
const count = document.getElementById('pCount').value;
const shape = document.getElementById('pShape').value;
for(let i=0; i<count; i++) {
this.pts.push({
x: Math.random()*this.cvs.width, y: Math.random()*this.cvs.height,
vx: (Math.random()-0.5)*2, vy: shape === 'matrix' ? (Math.random()*2+2) : (Math.random()-0.5)*2,
s: Math.random()*2+1, char: String.fromCharCode(0x30A0 + Math.random()*96)
});
}
},
loop: function() {
this.ctx.clearRect(0,0,this.cvs.width, this.cvs.height);
const color = getComputedStyle(document.documentElement).getPropertyValue('--accent');
const shape = document.getElementById('pShape').value;
this.ctx.fillStyle = color; this.ctx.strokeStyle = color;

this.pts.forEach((p, i) => {
if(shape !== 'star') {
p.x += p.vx * this.speed;
p.y += p.vy * this.speed;
}
if(p.x<0) p.x=this.cvs.width; if(p.x>this.cvs.width) p.x=0;
if(p.y<0) p.y=this.cvs.height; if(p.y>this.cvs.height) p.y=0;

this.ctx.globalAlpha = 0.5;
this.ctx.beginPath();
if(shape === 'circle' || shape === 'star') this.ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
else if(shape === 'matrix') { this.ctx.font = "12px monospace"; this.ctx.fillText(p.char, p.x, p.y); if(Math.random()>0.97) p.char = String.fromCharCode(0x30A0+Math.random()*96); }
else this.ctx.rect(p.x, p.y, p.s*2, p.s*2);
this.ctx.fill();

if(document.getElementById('pLine').checked && shape !== 'matrix') {
this.pts.forEach((p2, j) => {

const d = Math.hypot(p.x-p2.x, p.y-p2.y);
if(d < 100) {
this.ctx.globalAlpha = (1 - d/100) * 0.2;
this.ctx.beginPath(); this.ctx.moveTo(p.x, p.y); this.ctx.lineTo(p2.x, p2.y); this.ctx.stroke();
}
});
}
});
requestAnimationFrame(() => this.loop());
}
};

window.onload = () => app.init();
window.onresize = () => particles.init();
</script>
</body>
</html>
